<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Delete</title>
    <link rel="stylesheet" href="../css/styles.css">
</head>

<body>
    <header>
        <div class="logo">
            <img src="../assets/logo42_dark.svg" alt="Logo">
        </div>
        <nav>
            <ul>
                <li><a href="./index.html">Home</a></li>
                <li><a href="./test.html"> Get CGI</a></li>
                <li><a href="./about.html">About</a></li>
                <li><a href="./task.html">Task</a></li>
                <li><a href="./register.html">Register</a></li>
                <li><a href="./upload.html">Upload</a></li>
                <li><a href="./delete.html">Delete CGI</a></li>
                <li><a href="./red.html">Redirection</a></li>
                <li><a href="./deletenogi.html">Delete</a></li>
            </ul>
        </nav>
    </header>
    <main>
        <div class="delete">
            <h3>DELETE</h3>
            <form id="deleteForm">
                <label for="resourceId">File Name:</label> <br>
                <input type="text" id="resourceId" name="resourceId" required>
                <br><br>
                <input class="button_1" type="submit" value="Delete File">
            </form>
            <p id="responseMessage"></p>
        </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        $(document).ready(function () {
            $('#deleteForm').submit(function (event) {
                event.preventDefault(); 
                var resourceId = $('#resourceId').val(); 
                $.ajax({
                    url: '/file-to-delete/' + resourceId, 
                    type: 'DELETE', 
                    success: function (result) {
                        console.log('Delete Sucessfully');
                        alert('Deleted \'' + resourceId + '\' successfully!');
                        window.location.href = 'deletenogi.html';
                    },
                    error: function (xhr, status, error) {
                        console.error('Unable to delete', error);
                        alert('Unable to delete\'' + resourceId);
                        document.body.innerHTML = xhr.responseText;
                        window.location.href = 'deletenogi.html';
                    }
                });
            });
        });
    </script>
    </main>

</body>

</html>